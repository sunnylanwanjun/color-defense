{"version":3,"sources":["../../../../assets/scripts/assets/scripts/Utils.js"],"names":["cc","Class","ctor","pi","pi2","pid2","alertZIndex","tipZIndex","Pool","require","tipPool","setBuildFunc","tipNode","Node","color","label","addComponent","Label","fontSize","lineHeight","bind","setResetFunc","removeFromParent","opacity","center","deletePropertyFromArr","arr","args","key","obj","deleteProperty","setPropertyFromArr","setProperty","undefined","argsLen","arguments","length","i","getPropertyOrInit","getProperty","setIfUndef","alert","title","yesCallback","noCallback","curScene","director","getScene","prefab","resMgr","getRes","resName","instantiate","parent","zIndex","name","alertScript","getComponent","init","openLoading","closeLoading","loading","child","getChildByName","destroy","loadScene","sceneName","callback","err","sceneAssets","runSceneImmediate","scene","loadedResName","loadedNum","totalNum","log","isValid","loadingScript","setProgress","clone","jsonStr","JSON","stringify","parse","getMapCount","map","count","delByObj","srcObj","delObj","srcVal","hasFind","delKey","loadNetImg","remoteUrl","node","width","height","loadTempRes","texture","sp","Sprite","spriteFrame","SpriteFrame","setContentSize","x","winSize","y","random","min","max","Math","floor","getToggleCheckNode","toggleContainer","labelName","toggleItems","toggle","isChecked","getToggleCheckLabel","checkType","labelNode","labelComp","string","unToggleCheck","uncheck","colorStr","colorVal","split","red","green","blue","alpha","parseInt","newCCObj","info","type","error","objClass","isChildClassOf","Component","param","parseVal","value","Array","newArr","push","rad2ang","rad","ang2rad","ang","getDirAng","srcX","srcY","srcDir","targetX","targetY","nextDir","v2","angle","signAngle","isOutScreen","worldPos","convertToWorldSpace","Vec2","ZERO","dis2","pos0","pos1","wrapRad_0_2pi","wrapRad_fpi_zpi","tip","word","get","runAction","sequence","delayTime","spawn","moveTo","p","fadeTo","callFunc","lerp","v0","v1","ratio"],"mappings":"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","file":"Utils.js","sourceRoot":"../../../../assets/scripts","sourcesContent":["cc.Class({\n    ctor(){\n        this.pi = 3.1415926;\n        this.pi2 = 6.2831852;\n        this.pid2 = 1.5707963265;\n\n        this.alertZIndex = 100;\n        this.tipZIndex = 1000;\n\n        var Pool = require(\"Pool\");\n        this.tipPool = new Pool();\n        this.tipPool.setBuildFunc(function(){\n            var tipNode = new cc.Node();\n            tipNode.color = cc.color(255,0,0);\n            var label = tipNode.addComponent(cc.Label);\n            label.fontSize = 80;\n            label.lineHeight = 100;\n            return tipNode;\n        }.bind(this));\n        this.tipPool.setResetFunc(function(tipNode){\n            tipNode.removeFromParent();\n            tipNode.opacity = 255;\n            this.center(tipNode);\n        }.bind(this));\n    },\n    deletePropertyFromArr(arr,...args){\n        for(var key in arr){\n            var obj = arr[key];\n            if(!obj)continue;\n            this.deleteProperty(obj,...args);\n        }\n    },\n    setPropertyFromArr(arr,...args){\n        for(var key in arr){\n            var obj = arr[key];\n            if(!obj)continue;\n            this.setProperty(obj,...args);\n        }\n    },\n    deleteProperty(obj,...args){\n        if(!obj)return undefined;\n        var argsLen = arguments.length-1;\n        for(var i=0;i<argsLen-1;i++){\n            if(!obj[args[i]]){\n               return false;\n            }\n            obj = obj[args[i]];\n        }\n        delete obj[args[argsLen-1]];\n        return true;\n    },\n    getPropertyOrInit(obj,...args){\n        if(!obj)return undefined;\n        var argsLen = arguments.length-1;\n        for(var i=0;i<argsLen;i++){\n            if(!obj[args[i]]){\n                obj[args[i]] = {}\n            }\n            obj = obj[args[i]];\n        }\n        return obj;\n    },\n    getProperty(obj,...args){\n        if(!obj)return undefined;\n        var argsLen = arguments.length-1;\n        for(var i=0;i<argsLen;i++){\n            if(!obj[args[i]]){\n                return undefined;\n            }\n            obj = obj[args[i]];\n        }\n        return obj;\n    },\n    setIfUndef(obj,...args){\n        if(!obj)return undefined;\n        var argsLen = arguments.length-1;\n        for(var i=0;i<argsLen-2;i++){\n            if(!obj[args[i]]){\n                obj[args[i]] = {}\n            }\n            obj = obj[args[i]];\n        }\n        if(obj[args[argsLen-2]]){\n            return;\n        }\n        obj[args[argsLen-2]] = args[argsLen-1];\n    },\n    setProperty(obj,...args){\n        if(!obj)return undefined;\n        var argsLen = arguments.length-1;\n        for(var i=0;i<argsLen-2;i++){\n            if(!obj[args[i]]){\n                obj[args[i]] = {}\n            }\n            obj = obj[args[i]];\n        }\n        obj[args[argsLen-2]] = args[argsLen-1];\n    },\n    alert(title,yesCallback,noCallback){\n        var curScene = cc.director.getScene();\n        var prefab = cc.resMgr.getRes(cc.resName.alert);\n        var alert = cc.instantiate(prefab);\n        this.center(alert);\n        alert.parent = curScene;\n        alert.zIndex = this.alertZIndex;\n        alert.name = \"__ALERT_WND__\";\n        var alertScript = alert.getComponent(\"Alert\");\n        alertScript.init(title,yesCallback,noCallback);\n        return alert;\n    },\n    openLoading(){\n        this.closeLoading();\n        var curScene = cc.director.getScene();\n        var prefab = cc.resMgr.getRes(cc.resName.loading);\n        var loading = cc.instantiate(prefab);\n        this.center(loading);\n        loading.parent = curScene;\n        loading.name = \"__LOADING_WND__\";\n        return loading;\n    },\n    closeLoading(){\n        var curScene = cc.director.getScene();\n        var child = curScene.getChildByName(\"__LOADING_WND__\");\n        if(child){\n            child.destroy();\n        }\n    },\n    loadScene(sceneName,callback){\n        var loading = this.openLoading();\n        cc.resMgr.loadScene(sceneName,function(err){\n            if(err){\n                return;\n            }\n            var sceneAssets = cc.resMgr.getRes(sceneName);\n            cc.director.runSceneImmediate(sceneAssets.scene);\n            if(callback){\n                callback();\n            }\n        },function(err,loadedResName,loadedNum,totalNum){\n            if(err){\n                return;\n            }\n            cc.log(\"Utils:loadScene\",loadedResName,loadedNum,totalNum);\n            if(cc.isValid(loading)){\n                var loadingScript = loading.getComponent(\"Loading\");\n                loadingScript.setProgress(loadedNum,totalNum);\n            }\n        });\n    },\n    clone(obj){\n        if(!obj){\n            cc.log(\"Utils:clone obj is undefined\");\n            return undefined;\n        }\n        var jsonStr = JSON.stringify(obj);\n        return JSON.parse(jsonStr);\n    },\n    getMapCount(map){\n        var count = 0;\n        for(var key in map){\n            if(map[key]){\n                count++;\n            }\n        }\n        return count;\n    },\n    delByObj(srcObj,delObj){\n        for(var key in srcObj){\n            var srcVal = srcObj[key];\n            if(!srcVal)continue;\n            var hasFind = true;\n            for(var delKey in delObj){\n                if(srcVal[delKey] != delObj[delKey]){\n                    hasFind = false;\n                    break;\n                }\n            }\n            if(hasFind){\n                delete srcObj[key];\n                break;\n            }\n        }\n    },\n    loadNetImg(remoteUrl,node,width,height){\n        if(!remoteUrl||!node)return;\n        cc.resMgr.loadTempRes(remoteUrl,function (err, texture) {\n            // Use texture to create sprite frame\n            if(err){\n                cc.log(\"Utils:loadNetImg failure\",remoteUrl);\n                return;\n            }\n            if(cc.isValid(node)){\n                var sp = node.getComponent(cc.Sprite);\n                sp.spriteFrame = new cc.SpriteFrame(texture);\n                node.setContentSize(width,height);\n            }\n        },true);\n    },\n    center(node){\n        node.x = cc.winSize.width*0.5;\n        node.y = cc.winSize.height*0.5;\n    },\n    random(min,max){\n        return Math.floor(Math.random()*(max-min+1)+min);\n    },\n    getToggleCheckNode(toggleContainer){\n        var labelName = labelName || \"New Label\"\n        var toggleItems = toggleContainer.toggleItems;\n        for(var key in toggleItems){\n            var toggle = toggleItems[key];\n            if(toggle&&toggle.isChecked){\n                return toggle.node;\n            }\n        }\n    },\n    getToggleCheckLabel(toggleContainer,labelName){\n        var labelName = labelName || \"New Label\"\n        var toggleItems = toggleContainer.toggleItems;\n        var checkType = undefined;\n        for(var key in toggleItems){\n            var toggle = toggleItems[key];\n            if(toggle&&toggle.isChecked){\n                var labelNode = toggle.node.getChildByName(labelName);\n                var labelComp = labelNode.getComponent(cc.Label);\n                checkType = labelComp.string;\n                break;\n            }\n        }\n        return checkType\n    },\n    unToggleCheck(toggleContainer){\n        var toggleItems = toggleContainer.toggleItems;\n        for(var key in toggleItems){\n            var toggle = toggleItems[key];\n            if(toggle&&toggle.isChecked){\n                toggle.uncheck();\n            }\n        }\n    },\n    color(colorStr){\n        if(!colorStr){\n            return undefined;\n        }\n        var colorVal = colorStr.split(\"@\");\n        var red = 255;\n        var green = 255;\n        var blue = 255;\n        var alpha = 255;\n        if(colorVal.length>0)red=parseInt(colorVal[0]);\n        if(colorVal.length>1)green=parseInt(colorVal[1]);\n        if(colorVal.length>2)blue=parseInt(colorVal[2]);\n        if(colorVal.length>3)alpha=parseInt(colorVal[3]);\n\n        return cc.color(\n            red,\n            green,\n            blue,\n            alpha\n        );\n    },\n    newCCObj(info,node){\n        if(!info||!info.type){\n            cc.error(\"Utils:newCCObj info or info.type is undefined\");\n            return;\n        }\n        var objClass = cc[info.type];\n        if(!objClass){\n            cc.error(\"Utils:newCCObj objClass undefined type\",info.type);\n            return;\n        }\n        var obj = undefined;\n        if(cc.isChildClassOf(objClass,cc.Component)){\n            if(node){\n                obj = node.addComponent(objClass);\n            }\n        }else{\n            obj = new objClass();\n        }\n        if(!obj){\n            cc.error(\"Utils:newCCObj obj create failure\");\n            return;\n        }\n        if(!info.param)return obj;\n\n        var parseVal = function(value){\n            if(typeof value !== \"object\"){\n                return value;\n            }\n            if(value instanceof Array){\n                if(value.length==0){\n                    return value;\n                }\n                var newArr = [];\n                for(var key in value){\n                    newArr.push(parseVal(value[key]));\n                }\n                return newArr;\n            }else if(typeof value.type === \"string\"){\n                return this.newCCObj(value);\n            }else{\n                return value;\n            }\n        }.bind(this);\n\n        for(var key in info.param){\n            var value = info.param[key];\n            obj[key] = parseVal(value);\n        }\n        return obj;\n    },\n    rad2ang(rad){\n        return rad*57.296;\n    },\n    ang2rad(ang){\n        return ang*0.0175;\n    },\n    /*\n    srcPoint   ------>     targetPoint\n        |\n        |\n       \\ /\n       srcDir\n    */\n    getDirAng(srcX,srcY,srcDir,targetX,targetY){  \n        var nextDir = cc.v2(targetX-srcX,targetY-srcY);\n        //signAngle 表 srcDir 挪向 nextDir，逆时针为负，顺时针为正\n        var angle = srcDir.signAngle(nextDir);\n        angle = this.rad2ang(angle);\n        return angle;\n    },\n    isOutScreen(node){\n        var worldPos = node.convertToWorldSpace(cc.Vec2.ZERO);\n        if(worldPos.x>cc.winSize.width||\n           worldPos.y>cc.winSize.height||\n           worldPos.x<0||\n           worldPos.y<0){\n            return true;\n        }\n        return false;\n    },\n    dis2(pos0,pos1){\n        return (pos0.x-pos1.x)*(pos0.x-pos1.x) + (pos0.y-pos1.y)*(pos0.y-pos1.y);\n    },\n    wrapRad_0_2pi(rad){\n        if(rad>=0&&rad<=this.pi2)return rad;\n        if(rad<0){\n            while(rad<0)rad+=this.pi2;\n            return rad;\n        }else if(rad>this.pi2){\n            while(rad>this.pi2)rad-=this.pi2;\n            return rad;\n        }\n    },\n    wrapRad_fpi_zpi(rad){\n        if(rad>=-this.pi&&rad<=this.pi)return rad;\n        if(rad<-this.pi){\n            while(rad<-this.pi)rad+=this.pi2;\n            return rad;\n        }else if(rad>this.pi){\n            while(rad>this.pi)rad-=this.pi2;\n            return rad;\n        }\n    },\n    tip(word){\n        var tipNode = this.tipPool.get();\n        var curScene = cc.director.getScene();\n        tipNode.zIndex = this.tipZIndex;\n        tipNode.parent = curScene;\n        this.center(tipNode);\n        tipNode.getComponent(cc.Label).string = word;\n\n        tipNode.runAction(cc.sequence(\n            cc.delayTime(2),\n            cc.spawn(\n                cc.moveTo(0.5,cc.p(tipNode.x,tipNode.y+200)),\n                cc.fadeTo(0.5,0),\n            ),\n            cc.callFunc(function(){\n                this.tipPool.push(tipNode);\n            },this)\n        ));\n    },\n    //v0 to v1\n    lerp(v0,v1,ratio){\n        if(ratio<0)ratio=0;\n        if(ratio>1)ratio=1;\n        return v0+(v1-v0)*ratio;        \n    }\n})"]}