{"version":3,"sources":["../../../../../../../assets/scripts/node/entity/bullet/assets/scripts/node/entity/bullet/BulletBomb.js"],"names":["cc","Class","extends","require","ctor","xDir","v2","curPassIdx","passData","getCurPassIdx","initGameData","_super","gameData","launchAng","undefined","halfTime","goTime","uping","targetPos","initEntity","idx","dis","updateProperty","propValue","speed","logicUpdate","dt","baseNode","scale","utils","lerp","minScale","maxScale","deltaDis","pDistance","entityMgr","createEntity","x","y","myIdx","clearEntity","deltaX","Math","cos","deltaY","sin","configData","isOutMap"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAAQC,QAAQ,YAAR,CADH;AAELC,QAFK,kBAEC;AACF,aAAKC,IAAL,GAAYL,GAAGM,EAAH,CAAM,CAAN,EAAQ,CAAR,CAAZ;AACA,aAAKC,UAAL,GAAkBP,GAAGQ,QAAH,CAAYC,aAAZ,EAAlB;AACH,KALI;AAMLC,gBANK,0BAMS;AACV,aAAKC,MAAL;AACA,aAAKC,QAAL,CAAcC,SAAd,GAA0BC,SAA1B;AACA,aAAKF,QAAL,CAAcG,QAAd,GAAyBD,SAAzB;AACA,aAAKF,QAAL,CAAcI,MAAd,GAAuB,CAAvB;AACA,aAAKJ,QAAL,CAAcK,KAAd,GAAsB,IAAtB;AACA,aAAKL,QAAL,CAAcM,SAAd,GAA0BJ,SAA1B;AACH,KAbI;AAcLK,cAdK,sBAcMC,GAdN,EAcUF,SAdV,EAcoBL,SAdpB,EAc8BQ,GAd9B,EAckC;AACnC,aAAKV,MAAL,CAAYS,GAAZ;AACA,aAAKE,cAAL;AACA,aAAKV,QAAL,CAAcC,SAAd,GAA0BA,SAA1B;AACA,aAAKD,QAAL,CAAcM,SAAd,GAA0BA,SAA1B;AACA,aAAKN,QAAL,CAAcG,QAAd,GAAyBM,MAAI,KAAKE,SAAL,CAAeC,KAAnB,GAAyB,GAAlD;AACH,KApBI;AAqBLC,eArBK,uBAqBOC,EArBP,EAqBU;AACX,aAAKd,QAAL,CAAcI,MAAd,IAAsBU,EAAtB;AACA,YAAG,KAAKd,QAAL,CAAcK,KAAd,IACA,KAAKL,QAAL,CAAcI,MAAd,GAAqB,KAAKJ,QAAL,CAAcG,QADtC,EAC+C;AAC3C,iBAAKY,QAAL,CAAcC,KAAd,GAAsB5B,GAAG6B,KAAH,CAASC,IAAT,CAClB,KAAKP,SAAL,CAAeQ,QADG,EAElB,KAAKR,SAAL,CAAeS,QAFG,EAGlB,KAAKpB,QAAL,CAAcI,MAAd,GAAqB,KAAKJ,QAAL,CAAcG,QAHjB,CAAtB;AAIH,SAND,MAMK;AACD,gBAAG,KAAKH,QAAL,CAAcK,KAAjB,EAAuB;AACnB,qBAAKL,QAAL,CAAcI,MAAd,IAAwB,KAAKJ,QAAL,CAAcG,QAAtC;AACA,qBAAKH,QAAL,CAAcK,KAAd,GAAsB,KAAtB;AACH;AACD,iBAAKU,QAAL,CAAcC,KAAd,GAAsB5B,GAAG6B,KAAH,CAASC,IAAT,CAClB,KAAKP,SAAL,CAAeS,QADG,EAElB,KAAKT,SAAL,CAAeQ,QAFG,EAGlB,KAAKnB,QAAL,CAAcI,MAAd,GAAqB,KAAKJ,QAAL,CAAcG,QAHjB,CAAtB;AAIH;;AAED,YAAIkB,WAAW,KAAKV,SAAL,CAAeC,KAAf,GAAqBE,EAApC;AACA,YAAIL,MAAMrB,GAAGkC,SAAH,CAAa,IAAb,EAAkB,KAAKtB,QAAL,CAAcM,SAAhC,CAAV;AACA,YAAGG,MAAIY,QAAP,EAAgB;AACZjC,eAAGmC,SAAH,CAAaC,YAAb,CAA0B,kBAA1B,EACA,KAAKC,CADL,EAEA,KAAKC,CAFL,EAGA,KAAKC,KAHL;AAIAvC,eAAGmC,SAAH,CAAaK,WAAb,CAAyB,IAAzB;AACA;AACH;;AAED,YAAIC,SAASR,WAASS,KAAKC,GAAL,CAAS,KAAK/B,QAAL,CAAcC,SAAvB,CAAtB;AACA,YAAI+B,SAASX,WAASS,KAAKG,GAAL,CAAS,KAAKjC,QAAL,CAAcC,SAAvB,CAAtB;AACA,aAAKwB,CAAL,IAAQI,MAAR;AACA,aAAKH,CAAL,IAAQM,MAAR;;AAEA,YAAG5C,GAAG8C,UAAH,CAAcC,QAAd,CAAuB,KAAKxC,UAA5B,EAAuC,IAAvC,CAAH,EAAgD;AAC5CP,eAAGmC,SAAH,CAAaK,WAAb,CAAyB,IAAzB;AACH;AACJ;AA3DI,CAAT","file":"BulletBomb.js","sourceRoot":"../../../../../../../assets/scripts/node/entity/bullet","sourcesContent":["cc.Class({\n    extends:require(\"BulletBase\"),\n    ctor(){\n        this.xDir = cc.v2(1,0);\n        this.curPassIdx = cc.passData.getCurPassIdx();\n    },\n    initGameData(){\n        this._super();\n        this.gameData.launchAng = undefined;\n        this.gameData.halfTime = undefined;\n        this.gameData.goTime = 0;\n        this.gameData.uping = true;\n        this.gameData.targetPos = undefined;\n    },\n    initEntity(idx,targetPos,launchAng,dis){\n        this._super(idx);\n        this.updateProperty();\n        this.gameData.launchAng = launchAng;\n        this.gameData.targetPos = targetPos;\n        this.gameData.halfTime = dis/this.propValue.speed*0.5;\n    },\n    logicUpdate(dt){\n        this.gameData.goTime+=dt;\n        if(this.gameData.uping&&\n           this.gameData.goTime<this.gameData.halfTime){\n            this.baseNode.scale = cc.utils.lerp(\n                this.propValue.minScale,\n                this.propValue.maxScale,\n                this.gameData.goTime/this.gameData.halfTime);\n        }else{\n            if(this.gameData.uping){\n                this.gameData.goTime -= this.gameData.halfTime;\n                this.gameData.uping = false;\n            }\n            this.baseNode.scale = cc.utils.lerp(\n                this.propValue.maxScale,\n                this.propValue.minScale,\n                this.gameData.goTime/this.gameData.halfTime);\n        }\n\n        var deltaDis = this.propValue.speed*dt;\n        var dis = cc.pDistance(this,this.gameData.targetPos);\n        if(dis<deltaDis){\n            cc.entityMgr.createEntity(\"BulletBombEffect\",\n            this.x,\n            this.y,\n            this.myIdx);\n            cc.entityMgr.clearEntity(this);\n            return;\n        }\n\n        var deltaX = deltaDis*Math.cos(this.gameData.launchAng);\n        var deltaY = deltaDis*Math.sin(this.gameData.launchAng);\n        this.x+=deltaX;\n        this.y+=deltaY;\n\n        if(cc.configData.isOutMap(this.curPassIdx,this)){\n            cc.entityMgr.clearEntity(this);\n        }\n    }\n})"]}