{"version":3,"sources":["../../../../../../assets/scripts/node/entity/assets/scripts/node/entity/EntityFloor.js"],"names":["cc","Class","extends","require","ctor","sp","addComponent","Sprite","spriteFrame","gameui","getSpriteFrame","clickFloor","globalEvent","emit","initGameData","_super","initEntity","idx","floorIdx","resMgr","curSceneName","on","myType","myIdx","myProperty","myPropertyArr","split","floorInfo","configData","passAll","updateProperty","unInitEntity","off","judgeProperty","property","indexOf","setContentSize","w","h","keyHandle","keyCode","KEY","Delete","editData","deleteFloor"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAAQC,QAAQ,YAAR,CADH;AAELC,QAFK,kBAEC;AACF,YAAIC,KAAK,KAAKC,YAAL,CAAkBN,GAAGO,MAArB,CAAT;AACAF,WAAGG,WAAH,GAAiB,KAAKC,MAAL,CAAYC,cAAZ,CAA2B,WAA3B,CAAjB;AACH,KALI;AAMLC,cANK,wBAMO;AACRX,WAAGY,WAAH,CAAeC,IAAf,CAAoB,kBAApB,EAAuC,IAAvC;AACH,KARI;AASLC,gBATK,0BASS;AACV,aAAKC,MAAL;AACH,KAXI;AAYLC,cAZK,sBAYMC,GAZN,EAYUC,QAZV,EAYmB;AACpB,aAAKH,MAAL;;AAEA,YAAGf,GAAGmB,MAAH,CAAUC,YAAV,IAA0B,QAA7B,EAAsC;AAClC,iBAAKC,EAAL,CAAQ,UAAR,EAAmB,KAAKV,UAAxB,EAAmC,IAAnC;AACH;;AAED,aAAKW,MAAL,GAAc,MAAd;AACA,aAAKC,KAAL,GAAaN,GAAb;AACA,aAAKC,QAAL,GAAgBA,QAAhB;AACA,aAAKM,UAAL,GAAkB,cAAYN,QAA9B;AACA,aAAKO,aAAL,GAAqB,KAAKD,UAAL,CAAgBE,KAAhB,CAAsB,GAAtB,CAArB;AACA,aAAKC,SAAL,GAAiB3B,GAAG4B,UAAH,CAAcC,OAAd,CAAsBF,SAAvC;AACA,aAAKG,cAAL;AACH,KA1BI;AA2BLC,gBA3BK,0BA2BS;AACV,aAAKhB,MAAL;;AAEA,YAAGf,GAAGmB,MAAH,CAAUC,YAAV,IAA0B,QAA7B,EAAsC;AAClC,iBAAKY,GAAL,CAAS,UAAT,EAAoB,KAAKrB,UAAzB,EAAoC,IAApC;AACH;AACJ,KAjCI;AAkCLsB,iBAlCK,yBAkCSC,QAlCT,EAkCkB;AACnB,YAAGA,YAAU,KAAKV,UAAlB,EAA6B;AACzB,gBAAGU,SAASC,OAAT,CAAiB,KAAKX,UAAtB,KAAmC,CAAC,CAApC,IACA,KAAKA,UAAL,CAAgBW,OAAhB,CAAwBD,QAAxB,KAAmC,CAAC,CADpC,IAEAA,SAASC,OAAT,CAAiB,WAAjB,KAA+B,CAAC,CAFnC,EAEqC;AACnC,uBAAO,KAAP;AACD;AACJ;AACD,eAAO,IAAP;AACH,KA3CI;AA4CLL,kBA5CK,0BA4CUI,QA5CV,EA4CmB;AACpB,YAAG,CAAC,KAAKnB,MAAL,CAAYmB,QAAZ,CAAJ,EAA0B;AACtB,mBAAO,KAAP;AACH;AACD,YAAGA,YAAUA,SAASC,OAAT,CAAiB,WAAjB,KAA+B,CAAC,CAA7C,EAA+C;AAC3C,iBAAKC,cAAL,CAAoB,KAAKT,SAAL,CAAeU,CAAnC,EACI,KAAKV,SAAL,CAAeW,CADnB;AAEA,mBAAO,KAAP;AACH;AACD,eAAO,IAAP;AACH,KAtDI;AAuDLC,aAvDK,qBAuDKC,OAvDL,EAuDa;AACd,gBAAOA,OAAP;AACI,iBAAKxC,GAAGyC,GAAH,CAAOC,MAAZ;AACI1C,mBAAG2C,QAAH,CAAYC,WAAZ,CAAwB,KAAKrB,KAA7B,EAAmC,KAAKL,QAAxC;AACA;AAHR;AAKH;AA7DI,CAAT","file":"EntityFloor.js","sourceRoot":"../../../../../../assets/scripts/node/entity","sourcesContent":["cc.Class({\n    extends:require(\"EntityBase\"),\n    ctor(){\n        var sp = this.addComponent(cc.Sprite);\n        sp.spriteFrame = this.gameui.getSpriteFrame(\"ui-circle\");\n    },\n    clickFloor(){\n        cc.globalEvent.emit(\"Game:createTower\",this);\n    },\n    initGameData(){\n        this._super();\n    },\n    initEntity(idx,floorIdx){\n        this._super();\n\n        if(cc.resMgr.curSceneName != 'editor'){\n            this.on('touchend',this.clickFloor,this);\n        }\n\n        this.myType = \"pass\";\n        this.myIdx = idx;  \n        this.floorIdx = floorIdx;\n        this.myProperty = \"floorArr@\"+floorIdx;\n        this.myPropertyArr = this.myProperty.split(\"@\");\n        this.floorInfo = cc.configData.passAll.floorInfo;\n        this.updateProperty();\n    },\n    unInitEntity(){\n        this._super();\n        \n        if(cc.resMgr.curSceneName != 'editor'){\n            this.off('touchend',this.clickFloor,this);\n        }\n    },\n    judgeProperty(property){\n        if(property&&this.myProperty){\n            if(property.indexOf(this.myProperty)==-1&&\n               this.myProperty.indexOf(property)==-1&&\n               property.indexOf(\"floorInfo\")==-1){\n              return false;\n            }\n        }\n        return true;\n    },\n    updateProperty(property){\n        if(!this._super(property)){\n            return false;\n        }\n        if(property&&property.indexOf(\"floorInfo\")!=-1){\n            this.setContentSize(this.floorInfo.w,\n                this.floorInfo.h);\n            return false;\n        }\n        return true;\n    },\n    keyHandle(keyCode){\n        switch(keyCode) {\n            case cc.KEY.Delete:\n                cc.editData.deleteFloor(this.myIdx,this.floorIdx);\n                break;\n        }\n    },\n})"]}