{"version":3,"sources":["../../../../../assets/scripts/component/assets/scripts/component/SelectMap.js"],"names":["cc","Class","extends","Component","properties","tpl","default","undefined","type","Node","content","reuseItem","require","onLoad","configListLen","passData","getPassCount","gameConfig","isEditorMode","setDataLen","setUpdateItemFunc","item","idx","btn_pass","getChildByName","isTestMode","color","userData","curPassIdx","curMaxPassIdx","itemIdx","label","getComponent","Label","string","bind","start","clickPass","event","target","currentTarget","log","gameCtrl","playPassAD","changePass","utils","loadScene"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,aAAI;AACAC,qBAAQC,SADR;AAEAC,kBAAKR,GAAGS;AAFR,SADI;AAKRC,iBAAQ;AACJJ,qBAAQC,SADJ;AAEJC,kBAAKR,GAAGS;AAFJ,SALA;AASRE,mBAAU;AACNL,qBAAQC,SADF;AAENC,kBAAKI,QAAQ,WAAR;AAFC;AATF,KAHP;;AAkBLC,UAlBK,oBAkBK;AACN,YAAIC,gBAAgBd,GAAGe,QAAH,CAAYC,YAAZ,EAApB;AACA,YAAGhB,GAAGiB,UAAH,CAAcC,YAAjB,EAA8B;AAC1BJ;AACH;AACD,aAAKH,SAAL,CAAeQ,UAAf,CAA0BL,aAA1B;AACA,aAAKH,SAAL,CAAeS,iBAAf,CAAiC,UAASC,IAAT,EAAcC,GAAd,EAAkB;AAC/C,gBAAIC,WAAWF,KAAKG,cAAL,CAAoB,UAApB,CAAf;AACA,gBAAGxB,GAAGiB,UAAH,CAAcQ,UAAjB,EAA4B;AACxBF,yBAASG,KAAT,GAAiB1B,GAAG0B,KAAH,CAAS,GAAT,EAAa,GAAb,EAAiB,GAAjB,CAAjB;AACH,aAFD,MAEK;AACD,oBAAG1B,GAAG2B,QAAH,CAAYC,UAAZ,IAAwBN,GAA3B,EAA+B;AAC3BC,6BAASG,KAAT,GAAiB1B,GAAG0B,KAAH,CAAS,CAAT,EAAW,GAAX,EAAe,CAAf,CAAjB;AACH,iBAFD,MAEM,IAAG1B,GAAG2B,QAAH,CAAYE,aAAZ,IAA2BP,GAA9B,EAAkC;AACpCC,6BAASG,KAAT,GAAiB1B,GAAG0B,KAAH,CAAS,GAAT,EAAa,GAAb,EAAiB,GAAjB,CAAjB;AACH,iBAFK,MAED;AACDH,6BAASG,KAAT,GAAiB1B,GAAG0B,KAAH,CAAS,EAAT,EAAY,EAAZ,EAAe,EAAf,CAAjB;AACH;AACJ;AACDH,qBAASO,OAAT,GAAmBR,GAAnB;AACA,gBAAIS,QAAQR,SAASC,cAAT,CAAwB,OAAxB,EAAiCQ,YAAjC,CAA8ChC,GAAGiC,KAAjD,CAAZ;AACAF,kBAAMG,MAAN,GAAeZ,GAAf;AACH,SAhBgC,CAgB/Ba,IAhB+B,CAgB1B,IAhB0B,CAAjC;AAiBH,KAzCI;AA2CLC,SA3CK,mBA2CI,CAER,CA7CI;;;AA+CL;;AAEAC,aAjDK,qBAiDKC,KAjDL,EAiDW;AACZ,YAAIC,SAASD,MAAME,aAAnB;AACA,YAAIV,UAAUS,OAAOT,OAArB;;AAEA,YAAG,CAAC9B,GAAGiB,UAAH,CAAcQ,UAAlB,EAA6B;AACzB,gBAAGK,UAAQ9B,GAAG2B,QAAH,CAAYE,aAAvB,EAAqC;AACjC7B,mBAAGyC,GAAH,CAAO,qCAAP,EAA6CX,OAA7C,EAAqD,YAArD,EAAkE9B,GAAG2B,QAAH,CAAYE,aAA9E;AACA;AACH;AACJ;;AAED7B,WAAG0C,QAAH,CAAYC,UAAZ,CAAuB,YAAU;AAC7B3C,eAAGe,QAAH,CAAY6B,UAAZ,CAAuBd,OAAvB;AACA9B,eAAG6C,KAAH,CAASC,SAAT,CAAmB,MAAnB;AACH,SAHsB,CAGrBX,IAHqB,CAGhB,IAHgB,CAAvB;AAIH;AAhEI,CAAT","file":"SelectMap.js","sourceRoot":"../../../../../assets/scripts/component","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        tpl:{\n            default:undefined,\n            type:cc.Node,\n        },\n        content:{\n            default:undefined,\n            type:cc.Node,\n        },\n        reuseItem:{\n            default:undefined,\n            type:require(\"ReuseItem\"),\n        }\n    },\n\n    onLoad () {\n        var configListLen = cc.passData.getPassCount();\n        if(cc.gameConfig.isEditorMode){\n            configListLen++;\n        }\n        this.reuseItem.setDataLen(configListLen);\n        this.reuseItem.setUpdateItemFunc(function(item,idx){\n            var btn_pass = item.getChildByName(\"btn_pass\");\n            if(cc.gameConfig.isTestMode){\n                btn_pass.color = cc.color(255,255,255);\n            }else{\n                if(cc.userData.curPassIdx==idx){\n                    btn_pass.color = cc.color(0,255,0);\n                }else if(cc.userData.curMaxPassIdx>=idx){\n                    btn_pass.color = cc.color(255,255,255);\n                }else{\n                    btn_pass.color = cc.color(75,75,75);\n                }\n            }\n            btn_pass.itemIdx = idx;\n            var label = btn_pass.getChildByName(\"Label\").getComponent(cc.Label);\n            label.string = idx;\n        }.bind(this));\n    },\n\n    start () {\n        \n    },\n\n    // update (dt) {},\n\n    clickPass(event){\n        var target = event.currentTarget;\n        var itemIdx = target.itemIdx;\n\n        if(!cc.gameConfig.isTestMode){\n            if(itemIdx>cc.userData.curMaxPassIdx){\n                cc.log(\"SelectMap:clickPass failure,itemIdx\",itemIdx,\"maxPassIdx\",cc.userData.curMaxPassIdx);\n                return;\n            }\n        }\n\n        cc.gameCtrl.playPassAD(function(){\n            cc.passData.changePass(itemIdx);\n            cc.utils.loadScene(\"game\");\n        }.bind(this));\n    }\n});\n"]}