{"version":3,"sources":["../../../../../../../assets/scripts/node/entity/bullet/assets/scripts/node/entity/bullet/BulletLaser.js"],"names":["cc","Class","extends","require","ctor","initGameData","_super","gameData","targetArr","goTime","undefined","initEntity","updateProperty","property","_onCollisionEnter","other","self","node","onHitBullet","push","logicUpdate","dt","propValue","harmInterval","i","length","target","isAlive","splice","harm","_onCollisionExit","onUnHitBullet"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAAQC,QAAQ,YAAR,CADH;AAELC,QAFK,kBAEC,CACL,CAHI;AAILC,gBAJK,0BAIS;AACV,aAAKC,MAAL;AACA,aAAKC,QAAL,CAAcC,SAAd,GAA0B,EAA1B;AACA,aAAKD,QAAL,CAAcE,MAAd,GAAuBC,SAAvB;AACH,KARI;AASLC,cATK,wBASc;AACf,aAAKL,MAAL;AACH,KAXI;AAYLM,kBAZK,0BAYUC,QAZV,EAYmB;AACpB,YAAG,CAAC,KAAKP,MAAL,CAAYO,QAAZ,CAAJ,EAA0B;AACtB,mBAAO,KAAP;AACH;AACD,eAAO,IAAP;AACH,KAjBI;AAkBLC,qBAlBK,6BAkBaC,KAlBb,EAkBmBC,IAlBnB,EAkBwB;AACzBD,cAAME,IAAN,CAAWC,WAAX,CAAuB,IAAvB;AACA,aAAKX,QAAL,CAAcC,SAAd,CAAwBW,IAAxB,CAA6BJ,MAAME,IAAnC;AACH,KArBI;AAsBLG,eAtBK,uBAsBOC,EAtBP,EAsBU;AACX,YAAG,KAAKd,QAAL,CAAcE,MAAd,IAAsBC,SAAtB,IAAiC,KAAKH,QAAL,CAAcE,MAAd,GAAqB,KAAKa,SAAL,CAAeC,YAAxE,EAAqF;AACjF,iBAAKhB,QAAL,CAAcE,MAAd,IAAsBY,EAAtB;AACA;AACH;AACD,aAAKd,QAAL,CAAcE,MAAd,GAAuB,CAAvB;;AAEA,aAAI,IAAIe,IAAE,KAAKjB,QAAL,CAAcC,SAAd,CAAwBiB,MAAxB,GAA+B,CAAzC,EAA2CD,KAAG,CAA9C,EAAgDA,GAAhD,EAAoD;AAChD,gBAAIE,SAAS,KAAKnB,QAAL,CAAcC,SAAd,CAAwBgB,CAAxB,CAAb;AACA,gBAAG,CAACE,MAAD,IAAS,CAACA,OAAOC,OAAP,EAAb,EAA8B;AAC1B,qBAAKpB,QAAL,CAAcC,SAAd,CAAwBoB,MAAxB,CAA+BJ,CAA/B,EAAiC,CAAjC;AACA;AACH;AACDE,mBAAOG,IAAP,CAAY,KAAKP,SAAL,CAAeO,IAA3B;AACH;AACJ,KArCI;AAsCLC,oBAtCK,4BAsCYf,KAtCZ,EAsCkBC,IAtClB,EAsCuB;AACxB,aAAI,IAAIQ,IAAE,KAAKjB,QAAL,CAAcC,SAAd,CAAwBiB,MAAxB,GAA+B,CAAzC,EAA2CD,KAAG,CAA9C,EAAgDA,GAAhD,EAAoD;AAChD,gBAAIE,SAAS,KAAKnB,QAAL,CAAcC,SAAd,CAAwBgB,CAAxB,CAAb;AACA,gBAAGT,MAAME,IAAN,KAAeS,MAAlB,EAAyB;AACrB,qBAAKnB,QAAL,CAAcC,SAAd,CAAwBoB,MAAxB,CAA+BJ,CAA/B,EAAiC,CAAjC;AACAE,uBAAOK,aAAP,CAAqB,IAArB;AACA;AACH;AACJ;AACJ;AA/CI,CAAT","file":"BulletLaser.js","sourceRoot":"../../../../../../../assets/scripts/node/entity/bullet","sourcesContent":["cc.Class({\n    extends:require(\"BulletBase\"),\n    ctor(){\n    },  \n    initGameData(){\n        this._super();\n        this.gameData.targetArr = [];\n        this.gameData.goTime = undefined;\n    },\n    initEntity(...args){\n        this._super(...args);\n    },\n    updateProperty(property){\n        if(!this._super(property)){\n            return false;\n        }\n        return true;\n    },\n    _onCollisionEnter(other,self){\n        other.node.onHitBullet(this);\n        this.gameData.targetArr.push(other.node);\n    },\n    logicUpdate(dt){\n        if(this.gameData.goTime!=undefined&&this.gameData.goTime<this.propValue.harmInterval){\n            this.gameData.goTime+=dt;\n            return;\n        }\n        this.gameData.goTime = 0;\n\n        for(var i=this.gameData.targetArr.length-1;i>=0;i--){\n            var target = this.gameData.targetArr[i];\n            if(!target||!target.isAlive()){\n                this.gameData.targetArr.splice(i,1);\n                continue;\n            }\n            target.harm(this.propValue.harm);\n        }\n    },\n    _onCollisionExit(other,self){\n        for(var i=this.gameData.targetArr.length-1;i>=0;i--){\n            var target = this.gameData.targetArr[i];\n            if(other.node === target){\n                this.gameData.targetArr.splice(i,1);\n                target.onUnHitBullet(this);\n                break;\n            }\n        }\n    },\n})"]}