{"version":3,"sources":["../../../../../assets/scripts/component/assets/scripts/component/EditorLayerMgr.js"],"names":["cc","Class","extends","require","ctor","unInitLayerMgr","globalEvent","off","updateList","systemEvent","SystemEvent","EventType","KEY_UP","_keyHandle","entityMgr","unInitEntityMgr","skinMgr","unInitSkinMgr","keyHandle","keyObj","emit","initLayerMgr","node","_super","on","initEntityMgr","layerMap","initSkinMgr","updatePoint","updateFloor","updateBorn","updateTarget","updateRoad","logicUpdate","dt","_updatePoint","_updateFloor","_updateBorn","_updateTarget","_updateRoad","event","detail","type","property","indexOf"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAAQC,QAAQ,UAAR,CADH;AAELC,QAFK,kBAEC,CAEL,CAJI;AAKLC,kBALK,4BAKW;AACZL,WAAGM,WAAH,CAAeC,GAAf,CAAmB,qBAAnB,EAAyC,KAAKC,UAA9C,EAAyD,IAAzD;AACAR,WAAGS,WAAH,CAAeF,GAAf,CAAmBP,GAAGU,WAAH,CAAeC,SAAf,CAAyBC,MAA5C,EAAmD,KAAKC,UAAxD,EAAmE,IAAnE;AACA,aAAKC,SAAL,CAAeC,eAAf;AACA,aAAKC,OAAL,CAAaC,aAAb;AACH,KAVI;AAWLC,aAXK,qBAWKC,MAXL,EAWY;AACbnB,WAAGM,WAAH,CAAec,IAAf,CAAoBpB,GAAGU,WAAH,CAAeC,SAAf,CAAyBC,MAA7C,EAAoDO,MAApD;AACH,KAbI;AAcLE,gBAdK,wBAcQC,IAdR,EAca;AACd,aAAKC,MAAL,CAAYD,IAAZ;;AAEAtB,WAAGM,WAAH,CAAekB,EAAf,CAAkB,qBAAlB,EAAwC,KAAKhB,UAA7C,EAAwD,IAAxD;AACAR,WAAGS,WAAH,CAAee,EAAf,CAAkBxB,GAAGU,WAAH,CAAeC,SAAf,CAAyBC,MAA3C,EAAkD,KAAKM,SAAvD,EAAiE,IAAjE;;AAEA,aAAKJ,SAAL,GAAiBd,GAAGc,SAApB;AACA,aAAKE,OAAL,GAAehB,GAAGgB,OAAlB;AACA,aAAKF,SAAL,CAAeW,aAAf,CAA6B,KAAKC,QAAlC;AACA,aAAKV,OAAL,CAAaW,WAAb,CAAyB,KAAKD,QAA9B;;AAEA,aAAKE,WAAL;AACA,aAAKC,WAAL;AACA,aAAKC,UAAL;AACA,aAAKC,YAAL;AACA,aAAKC,UAAL;AACH,KA9BI;AA+BLC,eA/BK,uBA+BOC,EA/BP,EA+BU;AACX,aAAKpB,SAAL,CAAemB,WAAf,CAA2BC,EAA3B;AACA,aAAKC,YAAL;AACA,aAAKC,YAAL;AACA,aAAKC,WAAL;AACA,aAAKC,aAAL;AACA,aAAKC,WAAL;AACH,KAtCI;AAuCL/B,cAvCK,sBAuCMgC,KAvCN,EAuCY;AACb,YAAIC,SAASD,MAAMC,MAAnB;AACA,YAAGA,OAAOC,IAAP,IAAe,MAAf,IAAuB,CAACD,OAAOE,QAAlC,EAA2C;AACvC;AACH;AACD,YAAGF,OAAOE,QAAP,CAAgBC,OAAhB,CAAwB,SAAxB,KAAoC,CAAC,CAArC,IACAH,OAAOE,QAAP,CAAgBC,OAAhB,CAAwB,YAAxB,KAAuC,CAAC,CAD3C,EAEC;AACG,iBAAKZ,UAAL;AACH;AACD,YAAGS,OAAOE,QAAP,IAAmB,SAAtB,EAAgC;AAC5B,iBAAKf,WAAL;AACA;AACH;AACD,YAAGa,OAAOE,QAAP,IAAmB,SAAtB,EAAgC;AAC5B,iBAAKb,UAAL;AACA;AACH;AACD,YAAGW,OAAOE,QAAP,IAAmB,UAAtB,EAAiC;AAC7B,iBAAKd,WAAL;AACA;AACH;AACD,YAAGY,OAAOE,QAAP,IAAmB,WAAtB,EAAkC;AAC9B,iBAAKZ,YAAL;AACA;AACH;AACJ;AAjEI,CAAT","file":"EditorLayerMgr.js","sourceRoot":"../../../../../assets/scripts/component","sourcesContent":["cc.Class({\n    extends:require(\"LayerMgr\"),\n    ctor(){\n        \n    },\n    unInitLayerMgr(){\n        cc.globalEvent.off(\"EditData:updateList\",this.updateList,this);\n        cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this._keyHandle,this);\n        this.entityMgr.unInitEntityMgr();\n        this.skinMgr.unInitSkinMgr();\n    },\n    keyHandle(keyObj){\n        cc.globalEvent.emit(cc.SystemEvent.EventType.KEY_UP,keyObj);\n    },\n    initLayerMgr(node){\n        this._super(node);\n\n        cc.globalEvent.on(\"EditData:updateList\",this.updateList,this);\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.keyHandle,this);\n\n        this.entityMgr = cc.entityMgr;\n        this.skinMgr = cc.skinMgr;\n        this.entityMgr.initEntityMgr(this.layerMap);\n        this.skinMgr.initSkinMgr(this.layerMap);\n\n        this.updatePoint();\n        this.updateFloor();\n        this.updateBorn();\n        this.updateTarget();\n        this.updateRoad();\n    },\n    logicUpdate(dt){\n        this.entityMgr.logicUpdate(dt);\n        this._updatePoint();\n        this._updateFloor();\n        this._updateBorn();\n        this._updateTarget();\n        this._updateRoad();\n    },\n    updateList(event){\n        var detail = event.detail;\n        if(detail.type != \"pass\"||!detail.property){\n            return;\n        }\n        if(detail.property.indexOf(\"roadMap\")!=-1||\n           detail.property.indexOf(\"updateRoad\")!=-1\n        ){\n            this.updateRoad();\n        }\n        if(detail.property == \"roadMap\"){\n            this.updatePoint();\n            return;\n        }\n        if(detail.property == \"bornArr\"){\n            this.updateBorn();\n            return;\n        }\n        if(detail.property == \"floorArr\"){\n            this.updateFloor();\n            return;\n        }\n        if(detail.property == \"targetArr\"){\n            this.updateTarget();\n            return;\n        }\n    },\n})"]}