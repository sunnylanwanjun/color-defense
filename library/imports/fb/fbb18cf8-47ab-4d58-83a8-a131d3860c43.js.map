{"version":3,"sources":["../../../../../assets/scripts/component/assets/scripts/component/Touch.js"],"names":["cc","Class","extends","Component","properties","allowMove","onLoad","onDestroy","start","node","on","__mouseMoveHandle","__mouseDownHandle","__mouseUpHandle","__mouseLeaveHandle","mouseLeaveHandle","event","isMouseDown","isMouseMove","mousePos","getLocation","convertToNodeSpaceAR","v2","x","y","mouseEnterHandle","__mouseEnterHandle","mouseDownHandle","downMousePos","mouseHoverHandle","curMousePos","hoverPos","Math","abs","delta","getDelta","mouseMoveHandle","mouseEndHandle","mouseClickHandle","upPos"],"mappings":"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","file":"Touch.js","sourceRoot":"../../../../../assets/scripts/component","sourcesContent":["cc.Class({\n    extends:cc.Component,\n    properties:{\n        allowMove:true,\n    },\n    onLoad(){\n    },\n    onDestroy(){\n\n    },\n    start(){\n        this.node.on('mousemove',this.__mouseMoveHandle,this);\n        \n        this.node.on('touchstart',this.__mouseDownHandle,this);\n        this.node.on('touchmove',this.__mouseMoveHandle,this);\n        this.node.on('touchend',this.__mouseUpHandle,this);\n        this.node.on('touchcancel',this.__mouseLeaveHandle,this);\n    },\n    mouseLeaveHandle(){},\n    __mouseLeaveHandle(event){\n        this.isMouseDown = false;\n        this.isMouseMove = false;\n        var mousePos = event.getLocation();\n        mousePos = this.node.convertToNodeSpaceAR(cc.v2(mousePos.x,mousePos.y));\n        this.mouseLeaveHandle(mousePos,event);\n    },\n    mouseEnterHandle(){},\n    __mouseEnterHandle(event){\n        \n    },\n    mouseDownHandle(){},\n    __mouseDownHandle(event){\n        this.downMousePos = event.getLocation();\n        this.isMouseDown = true;\n        var mousePos = this.node.convertToNodeSpaceAR(cc.v2(this.downMousePos.x, this.downMousePos.y));\n        this.mouseDownHandle(mousePos,event);\n    },\n    mouseHoverHandle(){},\n    __mouseMoveHandle(event){\n        var curMousePos = event.getLocation();\n        var hoverPos = this.node.convertToNodeSpaceAR(cc.v2(curMousePos.x, curMousePos.y));\n        this.mouseHoverHandle(hoverPos,event);\n\n        if(!this.isMouseDown){\n            return;\n        }\n\n        if(Math.abs(this.downMousePos.x - curMousePos.x)<4&&\n           Math.abs(this.downMousePos.y - curMousePos.y)<4){\n            return;\n        }\n\n        this.isMouseMove = true;\n\n        if(this.allowMove){\n            var delta = event.getDelta();\n            this.node.x += delta.x;\n            this.node.y += delta.y;\n        }\n\n        this.mouseMoveHandle(hoverPos,event);\n    },\n    mouseEndHandle(){},\n    mouseClickHandle(){},\n    __mouseUpHandle(event){\n        var curMousePos = event.getLocation();\n        var upPos = this.node.convertToNodeSpaceAR(cc.v2(curMousePos.x, curMousePos.y));\n        this.mouseEndHandle(upPos,event);\n        this.isMouseDown = false;\n        if(this.isMouseMove){\n            this.isMouseMove = false;\n            return;\n        }\n        this.mouseClickHandle(upPos,event);\n    },\n})"]}